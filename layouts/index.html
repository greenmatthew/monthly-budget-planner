<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monthly Budget Planner</title>

    <!-- Favicon from favicon.io -->
    <link rel="apple-touch-icon" sizes="180x180" href="/monthly-budget-planner/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/monthly-budget-planner/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/monthly-budget-planner/favicon-16x16.png">
    <link rel="shortcut icon" href="/monthly-budget-planner/favicon.ico">

    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Budget Planner">

    <!-- PWA Manifest -->
    <link rel="manifest" href="/monthly-budget-planner/manifest.json">

    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/monthly-budget-planner/sw.js')
                .then(registration => console.log('SW registered'))
                .catch(error => console.log('SW registration failed'));
            });
        }
    </script>

    {{ $sass := resources.Get "styles/main.scss" }}
    {{ $css := $sass | css.Sass | resources.Minify | resources.Fingerprint }}
    <link rel="stylesheet" href="{{ $css.Permalink }}" integrity="{{ $css.Data.Integrity }}">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=delete" />
    <!--! Chart.js - MIT License - https://github.com/chartjs/Chart.js/blob/master/LICENSE.md -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <!--! Sortable.js - MIT License - https://github.com/SortableJS/Sortable/blob/master/LICENSE -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üí∞ Monthly Budget Planner <span id="version-link"><a href="https://github.com/greenmatthew/monthly-budget-planner/releases/tag/v{{ .Site.Params.version }}"><small>v{{ .Site.Params.version }}</small></a></span></h1>
            <div class="made-by-link">Made by <a href="/#about-me">Matthew Green</a></div>
            <p>I built this monthly budget planner for myself since I didn't like any of the free options available.</p>
            <p style="margin-top: 10px;">You can find more of my projects on <a href="/">this website</a>. Check out the source code on <a href="https://git.matthewgreen.gg/mgreen/monthly-budget-planner.git">my git server</a> or on <a href="https://github.com/greenmatthew/monthly-budget-planner.git">GitHub</a>.</p>
        </div>
        
        <div class="content">
            <!-- File Section -->
            <div class="section file-section">
                <h2>üíæ File</h2>
                <small class="note">Your budget auto-saves locally in your browser, but to ensure your data isn't lost, manually save to a JSON file using the Save Budget button above.</small>
                <div class="file-buttons">
                    <button class="btn" onclick="exportData()">üíæ Save Budget</button>
                    <button class="btn" onclick="importData()">üìÅ Load Budget</button>
                    <button class="btn" onclick="resetToDefaults()">üîÑ Reset to Defaults</button>
                </div>
                <div style="margin-bottom: 10px;">
                    <small class="note" id="auto-save-status">Auto-saved a moment ago...</small>
                </div>
            </div>

            <!-- Income Section -->
            <div class="section">
                <h2>üíµ Income</h2>
                <div class="input-group">
                    <label for="annual-gross-income">Annual Gross Income</label>
                    <input type="number" id="annual-gross-income" placeholder="Enter annual income" step="1000" />
                    <small class="note">Your annual salary before any taxes or deductions. This gets adjusted using 2025 tax rates for all the following calculations</small>
                </div>
                <div class="input-group" style="margin-top: 15px;">
                    <label for="additional-tax-rate">Additional Tax Rate (%)</label>
                    <input type="number" id="additional-tax-rate" placeholder="State tax rate, etc." step="0.1" />
                    <small class="note">
                        Enter as percentage (e.g., 5.5 for 5.5%). Applied to taxable income for state/local taxes.
                    </small>
                </div>
            </div>
            
            <!-- Categories Section -->
            <div class="section">
                <h2>üìÇ Categories</h2>
                <div id="categories-list">
                </div>
                <button class="btn" onclick="addCategory()">+ Add Category</button>
            </div>
            
            <!-- Budget Allocations Section -->
            <div class="section allocations-section">
                <h2>üìã Budget Allocations</h2>
                <div id="allocations-list"></div>
                <button class="btn" onclick="addAllocation()">+ Add Allocation</button>
            </div>
            
            <!-- Summary Section -->
            <div class="section summary">
                <h2>üìä Financial Summary</h2>
                <div class="summary-grid">
                    <div class="summary-item">
                        <h4>Monthly Gross Income<sup><a href="#summary-footnotes">1</a></sup></h4>
                        <div class="amount" id="summary-monthly-gross">$0</div>
                    </div>
                    <div class="summary-item">
                        <h4>Annual Gross Income</h4>
                        <div class="amount" id="summary-annual-gross">$0</div>
                    </div>
                    <div class="summary-item">
                        <h4>Monthly Take-Home<sup><a href="#summary-footnotes">2</a></sup></h4>
                        <div class="amount" id="summary-income">$0</div>
                    </div>
                    <div class="summary-item">
                        <h4>Annual Take-Home<sup><a href="#summary-footnotes">2</a></sup></h4>
                        <div class="amount" id="summary-annual-take-home">$0</div>
                    </div>
                    <div class="summary-item">
                        <h4>Monthly Expenses</h4>
                        <div class="amount" id="summary-expenses">$0</div>
                    </div>
                    <div class="summary-item">
                        <h4>Annual Expenses</h4>
                        <div class="amount" id="summary-annual-expenses">$0</div>
                    </div>
                    <div class="summary-item">
                        <h4>Monthly Total Savings</h4>
                        <div class="amount" id="summary-savings">$0</div>
                    </div>
                    <div class="summary-item">
                        <h4>Annual Total Savings</h4>
                        <div class="amount" id="summary-annual-savings">$0</div>
                    </div>
                    <div class="summary-item">
                        <h4>Monthly Net Cash Flow<sup><a href="#summary-footnotes">3</a></sup></h4>
                        <div class="amount" id="summary-cash-flow">$0</div>
                    </div>
                    <div class="summary-item">
                        <h4>Annual Net Cash Flow<sup><a href="#summary-footnotes">3</a></sup></h4>
                        <div class="amount" id="summary-annual-cash-flow">$0</div>
                    </div>
                    <div class="summary-item">
                        <h4>Monthly Setaside<sup><a href="#summary-footnotes">4</a></sup></h4>
                        <div class="amount" id="summary-setaside">$0</div>
                    </div>
                </div>
                
                <!-- Charts -->
                <div class="summary-charts">
                    <div class="chart-container">
                        <h3>Budget Allocations</h3>
                        <canvas id="budget-pie-chart" class="chart-canvas"></canvas>
                    </div>
                    <div class="chart-container">
                        <h3>Financial Projection</h3>
                        <canvas id="savings-chart" class="chart-canvas"></canvas>
                    </div>
                </div>

                <!-- Footnotes -->
                <div class="summary-footnotes" id="summary-footnotes">
                    <p><sup>1</sup>Gross Income: Your total income before any taxes or deductions are taken out.</p>
                    <p><sup>2</sup>Take-Home: Your gross income minus all taxes (federal, payroll, state/local).</p>
                    <p><sup>3</sup>Net Cash Flow: Your take-home income minus all expenses and savings allocations.</p>
                    <p><sup>4</sup>Monthly amount you need to save to be able to afford non-monthly expenses.</p>
                </div>
            </div>


        </div>
    </div>

    {{ $js := resources.Get "js/main.js" | resources.Minify | resources.Fingerprint }}
    <script src="{{ $js.Permalink }}" integrity="{{ $js.Data.Integrity }}"></script>

    <footer class="footer">
        <div class="footer-content">
            <p>¬© 2025 Matthew Alan Green</p>
            <p><a href="https://github.com/greenmatthew/monthly-budget-planner/blob/master/LICENSE">MIT License</a></p>
        </div>
    </footer>
</body>
</html>